
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>porcupine.menubar — The menu bar at the top of the Porcupine window &#8212; Porcupine API 0.99.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="porcupine.tabs — The tab manager and tabs in it" href="tabs.html" />
    <link rel="prev" title="porcupine — The top level Porcupine package" href="porcupine.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-porcupine.menubar">
<span id="porcupine-menubar-the-menu-bar-at-the-top-of-the-porcupine-window"></span><h1><a class="reference internal" href="#module-porcupine.menubar" title="porcupine.menubar"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.menubar</span></code></a> — The menu bar at the top of the Porcupine window<a class="headerlink" href="#module-porcupine.menubar" title="Permalink to this headline">¶</a></h1>
<p>See <a class="reference internal" href="plugin-intro.html#plugin-intro"><span class="std std-ref">the plugin writing introduction</span></a> and pretty much
any <a class="reference external" href="https://github.com/Akuli/porcupine/tree/master/porcupine/plugins">plugin that Porcupine comes with</a> for example usage.</p>
<dl class="py function">
<dt class="sig sig-object py" id="porcupine.menubar.get_menu">
<span class="sig-prename descclassname"><span class="pre">porcupine.menubar.</span></span><span class="sig-name descname"><span class="pre">get_menu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tkinter.Menu</span></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/menubar.py#L105-L140"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.menubar.get_menu" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a menu widget, creating menus as necessary.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">get_menu(&quot;Tools/Python&quot;)</span></code> returns a submenu labelled
<em>Python</em> from a menu named <em>Tools</em>. The <em>Tools</em> menu is created if it
doesn’t already exist.</p>
<p>If <em>path</em> is the empty string, then the menubar itself is returned.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="porcupine.menubar.set_enabled_based_on_tab">
<span class="sig-prename descclassname"><span class="pre">porcupine.menubar.</span></span><span class="sig-name descname"><span class="pre">set_enabled_based_on_tab</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="tabs.html#porcupine.tabs.Tab" title="porcupine.tabs.Tab"><span class="pre">porcupine.tabs.Tab</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/menubar.py#L229-L274"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.menubar.set_enabled_based_on_tab" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this for disabling menu items depending on the currently selected tab.</p>
<p>When the selected <a class="reference internal" href="tabs.html#porcupine.tabs.Tab" title="porcupine.tabs.Tab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tab</span></code></a> changes, <code class="docutils literal notranslate"><span class="pre">callback</span></code> will
be called with the selected tab as an argument, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if there are
no tabs. If the callback returns <code class="docutils literal notranslate"><span class="pre">False</span></code>, then the menu item given by
<em>path</em> is disabled (so that it looks grayed out and can’t be clicked).</p>
<p>The <em>path</em> works similarly to <a class="reference internal" href="#porcupine.menubar.get_menu" title="porcupine.menubar.get_menu"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_menu()</span></code></a>, except that it refers to a
menu item rather than a submenu. For example, <code class="docutils literal notranslate"><span class="pre">&quot;Tools/Python/Black&quot;</span></code>
means a menu item labelled <em>Black</em> in the <em>Tools/Python</em> menu.</p>
<p>For example, this creates a menu item <code class="docutils literal notranslate"><span class="pre">Foo/Bar</span></code> and disables it whenever
the currently selected tab is not a <a class="reference internal" href="tabs.html#porcupine.tabs.FileTab" title="porcupine.tabs.FileTab"><code class="xref py py-class docutils literal notranslate"><span class="pre">porcupine.tabs.FileTab</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">porcupine</span> <span class="kn">import</span> <span class="n">menubar</span><span class="p">,</span> <span class="n">tabs</span>

<span class="k">def</span> <span class="nf">do_something</span><span class="p">():</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">setup</span><span class="p">():</span>
    <span class="n">menubar</span><span class="o">.</span><span class="n">get_menu</span><span class="p">(</span><span class="s2">&quot;Foo&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Bar&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">do_something</span><span class="p">)</span>
    <span class="n">menubar</span><span class="o">.</span><span class="n">set_enabled_based_on_tab</span><span class="p">(</span><span class="s2">&quot;Foo/Bar&quot;</span><span class="p">,</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">tab</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="n">tabs</span><span class="o">.</span><span class="n">FileTab</span><span class="p">)))</span>
</pre></div>
</div>
<p>Sometimes you need to update the enabled-ness of a menu item for other
reasons than changing the currently selected tab. To do that, call the
callback that this function returns. It’s always called when the selected
tab changes, but you can call it at other times too. The returned callback
ignores all arguments given to it, which makes using it with <code class="docutils literal notranslate"><span class="pre">.bind()</span></code>
easier.</p>
</dd></dl>

<dl class="py virtualevent">
<dt class="sig sig-object py" id="porcupine.menubar.Menubar-Foo-Bar-Baz">
<span id="porcupine.menubar.Menubar:Foo/Bar/Baz"></span><em class="property"><span class="pre">virtual</span> <span class="pre">event</span> </em><span class="sig-name descname"><span class="pre">&lt;&lt;Menubar:Foo/Bar/Baz&gt;&gt;</span></span><a class="headerlink" href="#porcupine.menubar.Menubar-Foo-Bar-Baz" title="Permalink to this definition">¶</a></dt>
<dd><p>Generating an event like this on the main window (see
<a class="reference internal" href="porcupine.html#porcupine.get_main_window" title="porcupine.get_main_window"><code class="xref py py-func docutils literal notranslate"><span class="pre">porcupine.get_main_window()</span></code></a>) runs the callback of a menu item named
<code class="docutils literal notranslate"><span class="pre">Baz</span></code> in a menu named <code class="docutils literal notranslate"><span class="pre">Foo/Bar</span></code> (see <a class="reference internal" href="#porcupine.menubar.get_menu" title="porcupine.menubar.get_menu"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_menu()</span></code></a>).</p>
<p>Porcupine has a file named <code class="docutils literal notranslate"><span class="pre">keybindings.tcl</span></code>, and it can be edited at
<em>Settings/Config Files</em> in the menubar.
By default, it contains a link to Porcupine’s default <code class="docutils literal notranslate"><span class="pre">keybindings.tcl</span></code>,
and that contains many example key bindings.
All of them work by associating a keyboard event, such as <code class="docutils literal notranslate"><span class="pre">&lt;Control-n&gt;</span></code>,
which one of these virtual events, such as <code class="docutils literal notranslate"><span class="pre">&lt;&lt;Menubar:File/New</span> <span class="pre">File&gt;&gt;</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="porcupine.menubar.add_config_file_button">
<span class="sig-prename descclassname"><span class="pre">porcupine.menubar.</span></span><span class="sig-name descname"><span class="pre">add_config_file_button</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">menu</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Settings/Config</span> <span class="pre">Files'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/menubar.py#L143-L150"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.menubar.add_config_file_button" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a button to <em>Settings/Config Files</em> (or some other menu)
that opens a file in Porcupine when it’s clicked.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="porcupine.menubar.update_keyboard_shortcuts">
<span class="sig-prename descclassname"><span class="pre">porcupine.menubar.</span></span><span class="sig-name descname"><span class="pre">update_keyboard_shortcuts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/menubar.py#L213-L226"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.menubar.update_keyboard_shortcuts" title="Permalink to this definition">¶</a></dt>
<dd><p>This function does several different things to each menu item. Here’s what
it does to the <em>Edit</em> menu and the <em>Find and Replace</em> menu item inside it:</p>
<blockquote>
<div><ul class="simple">
<li><p>Show <em>Ctrl+F</em> (or <em>⌘F</em> on Mac) next to <em>Find and Replace</em>.</p></li>
<li><p>Ensure that the menu item’s callback runs when Ctrl+F (or Command+F) is pressed.</p></li>
<li><p>Allow the <em>Edit</em> menu to be accessed by pressing Alt+E.</p></li>
</ul>
</div></blockquote>
<p>This has to be called when menus or keyboard shortcuts have been modified.
It’s called automatically when a plugin has been set up.</p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Menu labels must be ASCII only, because they are used in virtual events.
Let me know if this limitation bothers you.</p>
<p>Slashes can be escaped by doubling them. For example, <code class="docutils literal notranslate"><span class="pre">&quot;Foobar/Send//Receive&quot;</span></code>
means an entry <em>Send/Receive</em> inside a menu named <em>Foobar</em>.</p>
</div>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Porcupine API</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="plugin-intro.html">Introduction to Writing Plugins</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="porcupine.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine</span></code> — The top level Porcupine package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.menubar</span></code> — The menu bar at the top of the Porcupine window</a></li>
<li class="toctree-l1"><a class="reference internal" href="tabs.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.tabs</span></code> — The tab manager and tabs in it</a></li>
<li class="toctree-l1"><a class="reference internal" href="textutils.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.textutils</span></code> — Things for <code class="docutils literal notranslate"><span class="pre">tkinter.Text</span></code> widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="images.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.images</span></code> — Load images that come with Porcupine</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.settings</span></code> — Porcupine’s setting manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="pluginloader.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.pluginloader</span></code> — The module that loads plugins on startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.utils</span></code> — Handy utility functions and classes</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="porcupine.html" title="previous chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine</span></code> — The top level Porcupine package</a></li>
      <li>Next: <a href="tabs.html" title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.tabs</span></code> — The tab manager and tabs in it</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy; 2017-2021 Akuli.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/menubar.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>