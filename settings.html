
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>porcupine.settings — Porcupine’s setting manager &#8212; Porcupine API 0.76.1-git-e8190d3 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="porcupine.pluginloader — The module that loads plugins on startup" href="pluginloader.html" />
    <link rel="prev" title="porcupine.filetypes — Low-level access to filetypes.toml stuff" href="filetypes.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-porcupine.settings">
<span id="porcupine-settings-porcupine-s-setting-manager"></span><h1><a class="reference internal" href="#module-porcupine.settings" title="porcupine.settings"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.settings</span></code></a> — Porcupine’s setting manager<a class="headerlink" href="#module-porcupine.settings" title="Permalink to this headline">¶</a></h1>
<p>This module manages Porcupine’s settings and the <em>Porcupine Settings</em> dialog
in the <em>Edit</em> menu.</p>
<div class="section" id="getting-and-setting">
<h2>Getting and Setting<a class="headerlink" href="#getting-and-setting" title="Permalink to this headline">¶</a></h2>
<p>Use these functions for setting and getting values of options:</p>
<dl class="py function">
<dt id="porcupine.settings.set">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">option_name</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></span></em>, <em class="sig-param"><span class="n">value</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)">object</a></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">from_config</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a><a class="headerlink" href="#porcupine.settings.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of an opiton.</p>
<p>Set <code class="docutils literal notranslate"><span class="pre">from_config=True</span></code> if the value comes from a configuration
file (see <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a>). That does two things:</p>
<blockquote>
<div><ul class="simple">
<li><p>The converter given to <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a> will be used.</p></li>
<li><p>If the option hasn’t been added with <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a> yet, then
the value won’t be set immediatelly, but instead it gets set
later when the option is added.</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="porcupine.settings.get">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">option_name</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></span></em>, <em class="sig-param"><span class="n">type</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; Any<a class="headerlink" href="#porcupine.settings.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current value of an option.
<em>type</em> should be <code class="docutils literal notranslate"><span class="pre">str</span></code> or <code class="docutils literal notranslate"><span class="pre">int</span></code> depending on what type the option is.
You can also specify <code class="docutils literal notranslate"><span class="pre">object</span></code> to allow any type.</p>
<p>This method works correctly for <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> and <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>,
but sometimes it returns Any because mypy sucks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;something&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="n">reveal_type</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>  <span class="c1"># str</span>

<span class="n">shitty_bar</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;something&#39;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">])</span>
<span class="n">reveal_type</span><span class="p">(</span><span class="n">shitty_bar</span><span class="p">)</span>  <span class="c1"># Any</span>
</pre></div>
</div>
<p>Use a type annotation to work around this (and make sure to write the
same type two times):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">good_bar</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;something&#39;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">])</span>
<span class="n">reveal_type</span><span class="p">(</span><span class="n">good_bar</span><span class="p">)</span>  <span class="c1"># Optional[pathlib.Path]</span>
</pre></div>
</div>
<p>Options of mutable types are returned as copies, so things like
<code class="docutils literal notranslate"><span class="pre">settings.get('something',</span> <span class="pre">List[str])</span></code> always return a new list.
If you want to change a setting like that, you need to first get a copy
of the current value, then modify the copy, and finally <a class="reference internal" href="#porcupine.settings.set" title="porcupine.settings.set"><code class="xref py py-func docutils literal notranslate"><span class="pre">set()</span></code></a> it
back. This is an easy way to make sure that change events run every
time the value changes.</p>
</dd></dl>

<dl class="py function">
<dt id="porcupine.settings.debug_dump">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">debug_dump</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a><a class="headerlink" href="#porcupine.settings.debug_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Print all settings and their values. This is useful for debugging.</p>
</dd></dl>

<p>Porcupine has these options by default (but you can add your own options too, see below):</p>
<blockquote>
<div><dl>
<dt><code class="docutils literal notranslate"><span class="pre">font_family</span></code>: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> <br /> <code class="docutils literal notranslate"><span class="pre">font_size</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></dt><dd><p>The font family and size used in Porcupine’s main text widget.</p>
<p>Porcupine also keeps these settings in a special font named
<code class="docutils literal notranslate"><span class="pre">TkFixedFont</span></code>, so if you want to use this font in a widget just
pass it a <code class="docutils literal notranslate"><span class="pre">font='TkFixedFont'</span></code> option. <code class="docutils literal notranslate"><span class="pre">Text</span></code> widgets use
<code class="docutils literal notranslate"><span class="pre">TkFixedFont</span></code> by default.</p>
<p>Do this if you need a <code class="docutils literal notranslate"><span class="pre">Font</span></code> object instead of the font name as a
string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">tkinter.font</span>
<span class="n">fixedfont</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;TkFixedFont&#39;</span><span class="p">,</span> <span class="n">exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pygments_style</span></code>: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></dt><dd><p>Name of the current Pygments style used for syntax highlighting.
Use this option like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">porcupine</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">pygments</span> <span class="kn">import</span> <span class="n">styles</span>
<span class="n">the_style</span> <span class="o">=</span> <span class="n">styles</span><span class="o">.</span><span class="n">get_style_by_name</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pygments_style&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default_filetype</span></code>: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></dt><dd><p>Name of the filetype used when a new file is created with e.g. Ctrl+N.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="filetypes.html#porcupine.filetypes.get_filetype_by_name" title="porcupine.filetypes.get_filetype_by_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">porcupine.filetypes.get_filetype_by_name()</span></code></a></p>
</div>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">disabled_plugins</span></code>: List[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
<blockquote>
<div><p>Names of plugins that the user has disabled. See <a class="reference internal" href="pluginloader.html#module-porcupine.pluginloader" title="porcupine.pluginloader"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.pluginloader</span></code></a>.</p>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="custom-options">
<h2>Custom Options<a class="headerlink" href="#custom-options" title="Permalink to this headline">¶</a></h2>
<p>You can use <a class="reference internal" href="#module-porcupine.settings" title="porcupine.settings"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.settings</span></code></a> for storing things that shouldn’t reset every
time Porcupine is restarted.</p>
<dl class="py function">
<dt id="porcupine.settings.add_option">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">add_option</code><span class="sig-paren">(</span><em class="sig-param">option_name: str, default: Any, *, type: Optional[Any] = None, converter: Callable[[Any], Any] = &lt;function Settings.&lt;lambda&gt;&gt;</em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a><a class="headerlink" href="#porcupine.settings.add_option" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a custom option.</p>
<p>The type of <em>default</em> determines how <a class="reference internal" href="#porcupine.settings.set" title="porcupine.settings.set"><code class="xref py py-func docutils literal notranslate"><span class="pre">set()</span></code></a> and <a class="reference internal" href="#porcupine.settings.get" title="porcupine.settings.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">get()</span></code></a> behave.
For example, if <em>default</em> is a string, then
calling <a class="reference internal" href="#porcupine.settings.set" title="porcupine.settings.set"><code class="xref py py-func docutils literal notranslate"><span class="pre">set()</span></code></a> with a value that isn’t a string or
calling <a class="reference internal" href="#porcupine.settings.get" title="porcupine.settings.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">get()</span></code></a> with the type set to something else than <code class="docutils literal notranslate"><span class="pre">str</span></code>
is an error. You can also provide a custom type with the <em>type</em>
argument, e.g. <code class="docutils literal notranslate"><span class="pre">add_option('foo',</span> <span class="pre">None,</span> <span class="pre">Optional[pathlib.Path])</span></code>.</p>
<p>If you are adding a global option (see <a class="reference internal" href="#porcupine.settings.Settings" title="porcupine.settings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a> for non-global
options), use only JSON-safe types. Let me know if this limitation is
too annoying.</p>
<p>If you are <strong>not</strong> adding a global option, you
can also specify a <em>converter</em> that takes the value in the
configuration file as an argument and returns an instance of <em>type</em>.
For example, <code class="docutils literal notranslate"><span class="pre">pygments_lexer</span></code> is set to a string like
“pygments.lexers.Foo” in the config file, even though it appears as a
class in the settings object. That’s implemented similarly to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">import_lexer_class</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">something</span><span class="p">:</span>
    <span class="o">...</span>

<span class="n">filetab</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span>
    <span class="s1">&#39;pygments_lexer&#39;</span><span class="p">,</span>
    <span class="n">pygments</span><span class="o">.</span><span class="n">lexers</span><span class="o">.</span><span class="n">TextLexer</span><span class="p">,</span>
    <span class="o">...</span>
    <span class="n">converter</span><span class="o">=</span><span class="n">import_lexer_class</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, the converter returns its argument unchanged.</p>
</dd></dl>

<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span>
<span class="kn">from</span> <span class="nn">porcupine</span> <span class="kn">import</span> <span class="n">settings</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">connect_to_http_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">host</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http_server_host&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">port</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http_server_port&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connecting to localhost:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">setup</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># 80 and &#39;127.0.0.1&#39; are default values</span>
    <span class="n">settings</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s1">&#39;http_server_host&#39;</span><span class="p">,</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">)</span>
    <span class="n">settings</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s1">&#39;http_server_port&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>All plugins use the same options, so don’t make the option names too short.
For example, if two plugins define an option named <code class="docutils literal notranslate"><span class="pre">port</span></code>,
then one of them will get an error from <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a> when the plugins get set up.
If the plugins had instead named their options e.g. <code class="docutils literal notranslate"><span class="pre">langserver_port</span></code> and <code class="docutils literal notranslate"><span class="pre">http_server_port</span></code>,
then there would be no problem.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Porcupine stores the settings in a JSON file, but that file isn’t meant to be
edited directly by users. Instead, please provide some way to change the
settings with a GUI, such as a handle that can be dragged to change the size
settings of a widget, or add something to the setting dialog (see below).</p>
</div>
</div>
<div class="section" id="the-settings-dialog">
<h2>The Settings Dialog<a class="headerlink" href="#the-settings-dialog" title="Permalink to this headline">¶</a></h2>
<p>Click <em>Porcupine Settings</em> in the <em>Edit</em> menu to open the dialog.
The dialog contains a <a class="reference external" href="https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Notebook" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Notebook</span></code></a> widget and some buttons.</p>
<dl class="py function">
<dt id="porcupine.settings.get_notebook">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">get_notebook</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Notebook" title="(in Python v3.8)">tkinter.ttk.Notebook</a><a class="reference internal" href="_modules/porcupine/settings.html#get_notebook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.get_notebook" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the notebook widget in the setting dialog.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">settings.get_notebook().winfo_toplevel()</span></code> to access the dialog
itself. It’s a <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.Toplevel</span></code>.</p>
</dd></dl>

<p>You can add widgets to the notebook yourself, but it’s usually easiest to use this:</p>
<dl class="py function">
<dt id="porcupine.settings.add_section">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">add_section</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">title_text</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></span></em><span class="sig-paren">)</span> &#x2192; tkinter.ttk.Frame<a class="reference internal" href="_modules/porcupine/settings.html#add_section"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.add_section" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Frame</span></code> to the notebook and return the frame.</p>
<p>The columns of the frame’s grid is configured suitably for
<a class="reference internal" href="#porcupine.settings.add_entry" title="porcupine.settings.add_entry"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_entry()</span></code></a>,
<a class="reference internal" href="#porcupine.settings.add_combobox" title="porcupine.settings.add_combobox"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_combobox()</span></code></a>,
<a class="reference internal" href="#porcupine.settings.add_spinbox" title="porcupine.settings.add_spinbox"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_spinbox()</span></code></a> and
<code class="xref py py-func docutils literal notranslate"><span class="pre">add_label()</span></code>.
Like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>,-----------------------------------------------------------.
| Porcupine Settings                                        |
|-----------------------------------------------------------|
|  / General \   / File Types \                             |
|_/           \_____________________________________________|
|                           :                           :   |
|                           :                           :col|
|         column 0          :         column 1          :umn|
|                           :                           : 2 |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
| ========================================================= |
|                                   ,---------. ,---------. |
|                                   |   OK    | |  Reset  | |
|                                   `---------&#39; `---------&#39; |
`-----------------------------------------------------------&#39;
</pre></div>
</div>
<p>Column 0 typically contains labels such as “Font Family:”, and column 1
contains widgets for changing the settings. Column 2 is used for displaying
<img alt="triangle" src="_images/triangle.gif" /> when the user has chosen the setting badly.</p>
</dd></dl>

<p>You can add widgets to the section yourself or use the following functions.
All of these assume that the <em>section</em> argument comes from <a class="reference internal" href="#porcupine.settings.add_section" title="porcupine.settings.add_section"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_section()</span></code></a>
and return the added widget.
A label that displays <em>text</em> is added to column 0 (see the ascii art above).</p>
<dl class="py function">
<dt id="porcupine.settings.add_entry">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">add_entry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">section</span><span class="p">:</span> <span class="n">tkinter.ttk.Frame</span></em>, <em class="sig-param"><span class="n">option_name</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></span></em>, <em class="sig-param"><span class="n">text</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></span></em>, <em class="sig-param"><span class="n">validate_callback</span><span class="p">:</span> <span class="n">Callable<span class="p">[</span><span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a><span class="p">]</span><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="o">**</span><span class="n">entry_kwargs</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; tkinter.ttk.Entry<a class="reference internal" href="_modules/porcupine/settings.html#add_entry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.add_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Entry</span></code> to the setting dialog.</p>
<p>A label that displays <em>text</em> will be added next to the entry.
All <code class="docutils literal notranslate"><span class="pre">**entry_kwargs</span></code> go to <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Entry</span></code>.</p>
<p>When the user types something into the entry,
<em>validate_callback</em> is called with the text of the entry as its only argument.
If it returns <code class="docutils literal notranslate"><span class="pre">True</span></code>, then the option given by <em>option_name</em>
is set to the string that the user typed.
Otherwise <img alt="triangle" src="_images/triangle.gif" /> is shown.</p>
</dd></dl>

<dl class="py function">
<dt id="porcupine.settings.add_combobox">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">add_combobox</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">section</span><span class="p">:</span> <span class="n">tkinter.ttk.Frame</span></em>, <em class="sig-param"><span class="n">option_name</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></span></em>, <em class="sig-param"><span class="n">text</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></span></em>, <em class="sig-param"><span class="o">**</span><span class="n">combobox_kwargs</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Combobox" title="(in Python v3.8)">tkinter.ttk.Combobox</a><a class="reference internal" href="_modules/porcupine/settings.html#add_combobox"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.add_combobox" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <a class="reference external" href="https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Combobox" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Combobox</span></code></a> to the setting dialog.</p>
<p>All <code class="docutils literal notranslate"><span class="pre">**combobox_kwargs</span></code> go to <a class="reference external" href="https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Combobox" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Combobox</span></code></a>.
Usually you should pass at least <code class="docutils literal notranslate"><span class="pre">values=list_of_strings</span></code>.</p>
<p>The content of the combobox is checked whenever it changes.
If it’s in <code class="docutils literal notranslate"><span class="pre">combobox['values']</span></code>
(given with the <code class="docutils literal notranslate"><span class="pre">values=list_of_strings</span></code> keyword argument or changed
later by configuring the returned combobox),
then the option given by <em>option_name</em> is set to the combobox content.
Otherwise <img alt="triangle" src="_images/triangle.gif" /> is shown.</p>
</dd></dl>

<dl class="py function">
<dt id="porcupine.settings.add_spinbox">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">add_spinbox</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">section</span><span class="p">:</span> <span class="n">tkinter.ttk.Frame</span></em>, <em class="sig-param"><span class="n">option_name</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></span></em>, <em class="sig-param"><span class="n">text</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></span></em>, <em class="sig-param"><span class="o">**</span><span class="n">spinbox_kwargs</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Spinbox" title="(in Python v3.8)">tkinter.ttk.Spinbox</a><a class="reference internal" href="_modules/porcupine/settings.html#add_spinbox"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.add_spinbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <code class="xref py py-class docutils literal notranslate"><span class="pre">utils.Spinbox</span></code> to the setting dialog.</p>
<p>All <code class="docutils literal notranslate"><span class="pre">**spinbox_kwargs</span></code> go to <code class="xref py py-class docutils literal notranslate"><span class="pre">utils.Spinbox</span></code>.
Usually you should pass at least <code class="docutils literal notranslate"><span class="pre">from_=some_integer,</span> <span class="pre">to=another_integer</span></code>.</p>
<p>The content of the spinbox is checked whenever it changes.
If it’s a valid integer between <code class="docutils literal notranslate"><span class="pre">spinbox['from']</span></code> and <code class="docutils literal notranslate"><span class="pre">spinbox['to']</span></code> (inclusive),
then the option given by <em>option_name</em> is set to the <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>.
Otherwise <img alt="triangle" src="_images/triangle.gif" /> is shown.</p>
</dd></dl>

</div>
<div class="section" id="change-events">
<h2>Change Events<a class="headerlink" href="#change-events" title="Permalink to this headline">¶</a></h2>
<dl class="py virtualevent">
<dt id="porcupine.settings.SettingChanged-foo">
<span id="porcupine.settings.SettingChanged:foo"></span><em class="property">virtual event </em><code class="sig-name descname">&lt;&lt;SettingChanged:foo&gt;&gt;</code><a class="headerlink" href="#porcupine.settings.SettingChanged-foo" title="Permalink to this definition">¶</a></dt>
<dd><p>When any setting is changed,
all widgets in the main window (see <a class="reference internal" href="porcupine.html#porcupine.get_main_window" title="porcupine.get_main_window"><code class="xref py py-func docutils literal notranslate"><span class="pre">porcupine.get_main_window()</span></code></a>)
receive a virtual event named <code class="docutils literal notranslate"><span class="pre">&lt;&lt;SettingChanged:option_name&gt;&gt;</span></code>,
where <code class="docutils literal notranslate"><span class="pre">option_name</span></code> is the name of the changed setting.
For example, <code class="docutils literal notranslate"><span class="pre">&lt;&lt;SettingChanged:pygments_style&gt;&gt;</span></code> runs
when the user changes the Pygments style.</p>
</dd></dl>

<p>All widget bindings go away automatically when the corresponding widget is destroyed.
For example, if you want to update the configuration of a <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.Text</span></code> widget when <code class="docutils literal notranslate"><span class="pre">pygments_style</span></code> changes,
you should use the <code class="docutils literal notranslate"><span class="pre">.bind()</span></code> method of that text widget.
This way your callback won’t be called when the text widget doesn’t exist anymore.</p>
<p>If you want your binding to work as long as Porcupine is running,
use the bind method of <a class="reference internal" href="porcupine.html#porcupine.get_tab_manager" title="porcupine.get_tab_manager"><code class="xref py py-func docutils literal notranslate"><span class="pre">porcupine.get_tab_manager()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Don’t use <a class="reference internal" href="porcupine.html#porcupine.get_main_window" title="porcupine.get_main_window"><code class="xref py py-func docutils literal notranslate"><span class="pre">porcupine.get_main_window()</span></code></a> for binding to <code class="docutils literal notranslate"><span class="pre">&lt;&lt;SettingChanged:foo&gt;&gt;</span></code>.
The main window is a <a class="reference external" href="https://docs.python.org/3/library/tkinter.html#tkinter.Tk" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.Tk</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.Toplevel</span></code> widget,
so it gets notified of its child widgets’ events too.
For example, let’s say that  there are 100 widgets currently being shown in the main window,
and you unwisely use the main window’s <code class="docutils literal notranslate"><span class="pre">bind()</span></code> to bind <code class="docutils literal notranslate"><span class="pre">&lt;&lt;SettingChanged:foo&gt;&gt;</span></code>.
When the <code class="docutils literal notranslate"><span class="pre">foo</span></code> setting changes, your bind callback runs
100 times with <code class="docutils literal notranslate"><span class="pre">event.widget</span></code> set to something else than the main window, and
once with <code class="docutils literal notranslate"><span class="pre">event.widget</span></code> set to the main window.
This can cause annoying slowness.</p>
</div>
</div>
<div class="section" id="misc-functions">
<h2>Misc functions<a class="headerlink" href="#misc-functions" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="porcupine.settings.reset">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">option_name</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a><a class="reference internal" href="_modules/porcupine/settings.html#reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an option to its default value given to <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt id="porcupine.settings.reset_all">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">reset_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a><a class="reference internal" href="_modules/porcupine/settings.html#reset_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.reset_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all settings, including the ones not shown in the setting dialog.
Clicking the reset button of the setting dialog runs this function.</p>
</dd></dl>

<dl class="py function">
<dt id="porcupine.settings.show_dialog">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">show_dialog</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a><a class="reference internal" href="_modules/porcupine/settings.html#show_dialog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.show_dialog" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the “Porcupine Settings” dialog.</p>
<p>This function is called when the user opens the dialog from the menu.</p>
</dd></dl>

<dl class="py function">
<dt id="porcupine.settings.save">
<code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">save</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a><a class="reference internal" href="_modules/porcupine/settings.html#save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the settings to the config file.</p>
<p>Note that <a class="reference internal" href="porcupine.html#porcupine.run" title="porcupine.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">porcupine.run()</span></code></a> always calls this before it returns,
so usually you don’t need to worry about calling this yourself.</p>
</dd></dl>

</div>
<div class="section" id="non-global-settings">
<h2>Non-global Settings<a class="headerlink" href="#non-global-settings" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="porcupine.settings.Settings">
<em class="property">class </em><code class="sig-prename descclassname">porcupine.settings.</code><code class="sig-name descname">Settings</code><a class="reference internal" href="_modules/porcupine/settings.html#Settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.Settings" title="Permalink to this definition">¶</a></dt>
<dd><p>This class provides settings that behave a lot like the global settings described above,
but each instance of <a class="reference internal" href="#porcupine.settings.Settings" title="porcupine.settings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a> has its own options
and isn’t related to other instances or global settings.
See <code class="xref py py-class docutils literal notranslate"><span class="pre">porcupine.tabs.Tab.settings</span></code> for an example.</p>
<p>The change events of <a class="reference internal" href="#porcupine.settings.Settings" title="porcupine.settings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a> instances differ from <a class="reference internal" href="#porcupine.settings.SettingChanged-foo" title="porcupine.settings.SettingChanged:foo"><code class="xref py py-virtevt docutils literal notranslate"><span class="pre">&lt;&lt;SettingChanged:foo&gt;&gt;</span></code></a>:</p>
<blockquote>
<div><ul class="simple">
<li><p>The change events are named differently.</p></li>
<li><p>Instead of having all child widgets of the main window receive the virtual events,
only one widget receives them.</p></li>
</ul>
</div></blockquote>
<p>The name of the event and the receiving widget should be mentioned
in the documentation of the <a class="reference internal" href="#porcupine.settings.Settings" title="porcupine.settings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a> instance,
such as the documentation of an attribute with type <a class="reference internal" href="#porcupine.settings.Settings" title="porcupine.settings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a>.</p>
<dl class="py method">
<dt id="porcupine.settings.Settings.set">
<code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">option_name</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/porcupine/settings.html#Settings.set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.Settings.set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="porcupine.settings.Settings.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">option_name</span></em>, <em class="sig-param"><span class="n">tybe</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/porcupine/settings.html#Settings.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.Settings.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="porcupine.settings.Settings.add_option">
<code class="sig-name descname">add_option</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">option_name</span></em>, <em class="sig-param"><span class="n">default</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/porcupine/settings.html#Settings.add_option"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.Settings.add_option" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="porcupine.settings.Settings.debug_dump">
<code class="sig-name descname">debug_dump</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/porcupine/settings.html#Settings.debug_dump"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#porcupine.settings.Settings.debug_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>These methods are just like the
<a class="reference internal" href="#porcupine.settings.set" title="porcupine.settings.set"><code class="xref py py-func docutils literal notranslate"><span class="pre">set()</span></code></a>, <a class="reference internal" href="#porcupine.settings.get" title="porcupine.settings.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">get()</span></code></a>, <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a> and <a class="reference internal" href="#porcupine.settings.debug_dump" title="porcupine.settings.debug_dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">debug_dump()</span></code></a> functions,
but they do things with the <a class="reference internal" href="#porcupine.settings.Settings" title="porcupine.settings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a> instance, not with the global settings.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Porcupine API</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="plugin-intro.html">Introduction to Writing Plugins</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="porcupine.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine</span></code> — The top level Porcupine package</a></li>
<li class="toctree-l1"><a class="reference internal" href="menubar.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.menubar</span></code> — The menu bar at the top of the Porcupine window</a></li>
<li class="toctree-l1"><a class="reference internal" href="tabs.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.tabs</span></code> — The tab manager and tabs in it</a></li>
<li class="toctree-l1"><a class="reference internal" href="textwidget.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.textwidget</span></code> — Things for <code class="docutils literal notranslate"><span class="pre">tkinter.Text</span></code> widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="images.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.images</span></code> — Load images that come with Porcupine</a></li>
<li class="toctree-l1"><a class="reference internal" href="dirs.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.dirs</span></code> — Paths to Porcupine’s files</a></li>
<li class="toctree-l1"><a class="reference internal" href="filetypes.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.filetypes</span></code> — Low-level access to <code class="docutils literal notranslate"><span class="pre">filetypes.toml</span></code> stuff</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.settings</span></code> — Porcupine’s setting manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="pluginloader.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.pluginloader</span></code> — The module that loads plugins on startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.utils</span></code> — Handy utility functions and classes</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="filetypes.html" title="previous chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.filetypes</span></code> — Low-level access to <code class="docutils literal notranslate"><span class="pre">filetypes.toml</span></code> stuff</a></li>
      <li>Next: <a href="pluginloader.html" title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.pluginloader</span></code> — The module that loads plugins on startup</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Akuli.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/settings.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>