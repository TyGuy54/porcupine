
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>porcupine.settings — Porcupine’s setting manager &#8212; Porcupine API 0.99.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="porcupine.pluginloader — The module that loads plugins on startup" href="pluginloader.html" />
    <link rel="prev" title="porcupine.images — Load images that come with Porcupine" href="images.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-porcupine.settings">
<span id="porcupine-settings-porcupine-s-setting-manager"></span><h1><a class="reference internal" href="#module-porcupine.settings" title="porcupine.settings"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.settings</span></code></a> — Porcupine’s setting manager<a class="headerlink" href="#module-porcupine.settings" title="Permalink to this headline">¶</a></h1>
<p>This module manages Porcupine’s settings and the <em>Porcupine Settings</em> dialog
in the <em>Edit</em> menu.</p>
<section id="getting-and-setting">
<h2>Getting and Setting<a class="headerlink" href="#getting-and-setting" title="Permalink to this headline">¶</a></h2>
<p>Use these functions for setting and getting values of options:</p>
<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.set_">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">set_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><span class="pre">object</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">call_converter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L206-L264"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.set_" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of an opiton.</p>
<p>Set <code class="docutils literal notranslate"><span class="pre">from_config=True</span></code> if the value comes from a configuration
file (see <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a>). That does two things:</p>
<blockquote>
<div><ul class="simple">
<li><p>The converter given to <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a> will be used.</p></li>
<li><p>If the option hasn’t been added with <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a> yet, then
the value won’t be set immediatelly, but instead it gets set
later when the option is added.</p></li>
</ul>
</div></blockquote>
<p>You can specify <code class="docutils literal notranslate"><span class="pre">call_converter</span></code> to force the converter to be or
to not be called.</p>
<p>This function is not named <code class="docutils literal notranslate"><span class="pre">set</span></code> to avoid conflicting with the
built-in <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a> class.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.get">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L282-L318"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current value of an option.
<em>type_</em> should be e.g. <code class="docutils literal notranslate"><span class="pre">str</span></code> or <code class="docutils literal notranslate"><span class="pre">int</span></code> depending on what type the option is.
You can also specify <code class="docutils literal notranslate"><span class="pre">object</span></code> to allow any type.</p>
<p>This method works correctly for <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> and <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>,
but sometimes it returns Any because mypy sucks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;something&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="n">reveal_type</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>  <span class="c1"># str</span>

<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="n">shitty_bar</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;something&#39;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">])</span>
<span class="n">reveal_type</span><span class="p">(</span><span class="n">shitty_bar</span><span class="p">)</span>  <span class="c1"># Any</span>
</pre></div>
</div>
<p>Use a type annotation to work around this (and make sure to write the
same type two times):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">good_bar</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;something&#39;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">])</span>
<span class="n">reveal_type</span><span class="p">(</span><span class="n">good_bar</span><span class="p">)</span>  <span class="c1"># Optional[Path]</span>
</pre></div>
</div>
<p>Before Python 3.10, you can’t use the new <code class="docutils literal notranslate"><span class="pre">|</span></code> syntax as an argument to <code class="docutils literal notranslate"><span class="pre">settings.get()</span></code>,
even though it otherwise works with <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">annotations</span></code>.
The same goes for built-in generics,
such as <code class="docutils literal notranslate"><span class="pre">list[str]</span></code> with lower-case <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<p>Options of mutable types are returned as copies, so things like
<code class="docutils literal notranslate"><span class="pre">settings.get('something',</span> <span class="pre">List[str])</span></code> always return a new list.
If you want to change a setting like that, you need to first get a copy
of the current value, then modify the copy, and finally <a class="reference internal" href="#porcupine.settings.set_" title="porcupine.settings.set_"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_()</span></code></a> it
back. This is an easy way to make sure that change events run every
time the value changes.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.debug_dump">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">debug_dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L320-L333"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.debug_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Print all settings and their values. This is useful for debugging.</p>
</dd></dl>

<p>Porcupine has these options by default (but you can add your own options too, see below):</p>
<blockquote>
<div><dl>
<dt><code class="docutils literal notranslate"><span class="pre">font_family</span></code>: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> <br /> <code class="docutils literal notranslate"><span class="pre">font_size</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></dt><dd><p>The font family and size used in Porcupine’s main text widget.</p>
<p>Porcupine also keeps these settings in a special font named
<code class="docutils literal notranslate"><span class="pre">TkFixedFont</span></code>, so if you want to use this font in a widget just
pass it a <code class="docutils literal notranslate"><span class="pre">font='TkFixedFont'</span></code> option. <code class="docutils literal notranslate"><span class="pre">Text</span></code> widgets use
<code class="docutils literal notranslate"><span class="pre">TkFixedFont</span></code> by default.</p>
<p>Do this if you need a <code class="docutils literal notranslate"><span class="pre">Font</span></code> object instead of the font name as a
string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">tkinter.font</span>
<span class="n">fixedfont</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;TkFixedFont&#39;</span><span class="p">,</span> <span class="n">exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pygments_style</span></code>: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></dt><dd><p>Name of the current Pygments style used for syntax highlighting.
Use this option like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">porcupine</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">pygments</span> <span class="kn">import</span> <span class="n">styles</span>
<span class="n">the_style</span> <span class="o">=</span> <span class="n">styles</span><span class="o">.</span><span class="n">get_style_by_name</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pygments_style&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span>
</pre></div>
</div>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">disabled_plugins</span></code>: list[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
<blockquote>
<div><p>Names of plugins that the user has disabled. See <a class="reference internal" href="pluginloader.html#module-porcupine.pluginloader" title="porcupine.pluginloader"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.pluginloader</span></code></a>.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">default_line_end</span></code>: <a class="reference internal" href="#porcupine.settings.LineEnding" title="porcupine.settings.LineEnding"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineEnding</span></code></a></p>
<blockquote>
<div><p>The default line ending for new files.</p>
</div></blockquote>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="porcupine.settings.LineEnding">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">LineEnding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L26-L70"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.LineEnding" title="Permalink to this definition">¶</a></dt>
<dd><p>This <a class="reference external" href="https://docs.python.org/3/library/enum.html#module-enum" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">enum</span></code></a> has these members representing different ways to write
newline characters to files:</p>
<dl class="py data">
<dt class="sig sig-object py" id="porcupine.settings.LineEnding.CR">
<span class="sig-name descname"><span class="pre">CR</span></span><a class="headerlink" href="#porcupine.settings.LineEnding.CR" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">\r</span></code>, aka “Mac line endings”.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="porcupine.settings.LineEnding.LF">
<span class="sig-name descname"><span class="pre">LF</span></span><a class="headerlink" href="#porcupine.settings.LineEnding.LF" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">\n</span></code>, aka “Linux/Unix line endings”.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="porcupine.settings.LineEnding.CRLF">
<span class="sig-name descname"><span class="pre">CRLF</span></span><a class="headerlink" href="#porcupine.settings.LineEnding.CRLF" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">\r\n</span></code>, aka “Windows line endings”.</p>
</dd></dl>

<p>Python’s <a class="reference external" href="https://docs.python.org/3/library/functions.html#open" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> function translates all of these to the string
<code class="docutils literal notranslate"><span class="pre">'\n'</span></code> when reading files and uses a platform-specific default when
writing files.</p>
<p>There are 3 ways to represent line endings in Porcupine, and
different things want the line ending represented in different ways:</p>
<blockquote>
<div><ul class="simple">
<li><p>The strings <code class="docutils literal notranslate"><span class="pre">'\r'</span></code>, <code class="docutils literal notranslate"><span class="pre">'\n'</span></code> and <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code>. For example,
<a class="reference external" href="https://docs.python.org/3/library/functions.html#open" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> line endings are specified like this.</p></li>
<li><p>The strings <code class="docutils literal notranslate"><span class="pre">'CR'</span></code>, <code class="docutils literal notranslate"><span class="pre">'LF'</span></code> and <code class="docutils literal notranslate"><span class="pre">'CRLF'</span></code>. Line endings are
typically defined this way in configuration files, such as
<a class="reference external" href="https://editorconfig.org/">editorconfig</a> files.</p></li>
<li><p>This enum. I recommend using this to avoid typos.
For example, <code class="docutils literal notranslate"><span class="pre">LineEnding[some_string_from_user]</span></code> (see below)
raises an error if the string is invalid.</p></li>
</ul>
</div></blockquote>
<p>Convert between this enum and the different kinds of strings like this:</p>
<blockquote>
<div><ul class="simple">
<li><p>Enum to backslashy string: <code class="docutils literal notranslate"><span class="pre">LineEnding.CRLF.value</span> <span class="pre">==</span> <span class="pre">'\r\n'</span></code></p></li>
<li><p>Enum to human readable string: <code class="docutils literal notranslate"><span class="pre">LineEnding.CRLF.name</span> <span class="pre">==</span> <span class="pre">'CRLF'</span></code></p></li>
<li><p>Backslashy string to enum: <code class="docutils literal notranslate"><span class="pre">LineEnding('\r\n')</span> <span class="pre">==</span> <span class="pre">LineEnding.CRLF</span></code></p></li>
<li><p>Human readable string to enum: <code class="docutils literal notranslate"><span class="pre">LineEnding['CRLF']</span> <span class="pre">==</span> <span class="pre">LineEnding.CRLF</span></code></p></li>
</ul>
</div></blockquote>
<p>Use <code class="docutils literal notranslate"><span class="pre">LineEnding(os.linesep)</span></code> to get the platform-specific default.</p>
</dd></dl>

</section>
<section id="custom-options">
<h2>Custom Options<a class="headerlink" href="#custom-options" title="Permalink to this headline">¶</a></h2>
<p>You can use <a class="reference internal" href="#module-porcupine.settings" title="porcupine.settings"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.settings</span></code></a> for storing things that shouldn’t reset every
time Porcupine is restarted.</p>
<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.add_option">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">add_option</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">option_name:</span> <span class="pre">str,</span> <span class="pre">default:</span> <span class="pre">Any,</span> <span class="pre">type_:</span> <span class="pre">Optional[Any]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">*,</span> <span class="pre">converter:</span> <span class="pre">Callable[[Any],</span> <span class="pre">Any]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_default_converter&gt;,</span> <span class="pre">exist_ok:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L124-L204"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.add_option" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a custom option.</p>
<p>The type of <em>default</em> determines how <a class="reference internal" href="#porcupine.settings.set_" title="porcupine.settings.set_"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_()</span></code></a> and <a class="reference internal" href="#porcupine.settings.get" title="porcupine.settings.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">get()</span></code></a> behave.
For example, if <em>default</em> is a string, then
calling <a class="reference internal" href="#porcupine.settings.set_" title="porcupine.settings.set_"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_()</span></code></a> with a value that isn’t a string or
calling <a class="reference internal" href="#porcupine.settings.get" title="porcupine.settings.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">get()</span></code></a> with the type set to something else than <code class="docutils literal notranslate"><span class="pre">str</span></code>
is an error. You can also provide a custom type with the <em>type</em>
argument, e.g. <code class="docutils literal notranslate"><span class="pre">add_option('foo',</span> <span class="pre">None,</span> <span class="pre">Optional[pathlib.Path])</span></code>.</p>
<p>If you are adding a global option (see <a class="reference internal" href="#porcupine.settings.Settings" title="porcupine.settings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a> for non-global
options), use only JSON-safe types. Let me know if this limitation is
too annoying.</p>
<p>If you are <strong>not</strong> adding a global option, you
can also specify a <em>converter</em> that takes the value in the
configuration file as an argument and returns an instance of <em>type</em>.
For example, <code class="docutils literal notranslate"><span class="pre">pygments_lexer</span></code> is set to a string like
“pygments.lexers.Foo” in the config file, even though it appears as a
class in the settings object. That’s implemented similarly to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">import_lexer_class</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">something</span><span class="p">:</span>
    <span class="o">...</span>

<span class="n">filetab</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span>
    <span class="s1">&#39;pygments_lexer&#39;</span><span class="p">,</span>
    <span class="n">pygments</span><span class="o">.</span><span class="n">lexers</span><span class="o">.</span><span class="n">TextLexer</span><span class="p">,</span>
    <span class="o">...</span>
    <span class="n">converter</span><span class="o">=</span><span class="n">import_lexer_class</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, the converter returns its argument unchanged.
Do not use a lambda function as the converter,
because the settings must be picklable.</p>
<p>If an option with the same name exists already, an error is raised by
default, but if <code class="docutils literal notranslate"><span class="pre">exist_ok=True</span></code> is given, then adding the same
option again is allowed. When this happens, an error is raised if
<em>default</em>, <em>type</em> or <em>converter</em> doesn’t match what was passed in when
the option was added for the first time.</p>
</dd></dl>

<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">porcupine</span> <span class="kn">import</span> <span class="n">settings</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">connect_to_http_server</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">host</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http_server_host&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">port</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http_server_port&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connecting to </span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">setup</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># 80 and &#39;127.0.0.1&#39; are default values</span>
    <span class="n">settings</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s1">&#39;http_server_host&#39;</span><span class="p">,</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">)</span>
    <span class="n">settings</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s1">&#39;http_server_port&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>All plugins use the same options, so don’t make the option names too short.
For example, if two plugins define an option named <code class="docutils literal notranslate"><span class="pre">port</span></code>,
then one of them will get an error from <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a> when the plugins get set up.
If the plugins had instead named their options e.g. <code class="docutils literal notranslate"><span class="pre">langserver_port</span></code> and <code class="docutils literal notranslate"><span class="pre">http_server_port</span></code>,
then there would be no problem.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Porcupine stores the settings in a JSON file, but that file isn’t meant to be
edited directly by users. Instead, please provide some way to change the
settings with a GUI, such as a handle that can be dragged to change the size
settings of a widget, or add something to the setting dialog (see below).</p>
</div>
</section>
<section id="the-settings-dialog">
<h2>The Settings Dialog<a class="headerlink" href="#the-settings-dialog" title="Permalink to this headline">¶</a></h2>
<p>Click <em>Porcupine Settings</em> in the <em>Edit</em> menu to open the dialog.</p>
<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.get_dialog_content">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">get_dialog_content</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tkinter.ttk.Frame</span></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L507-L548"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.get_dialog_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the widget where setting changing widgets should be added.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">settings.get_dialog_content().winfo_toplevel()</span></code> to access the dialog
itself. It’s a <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.Toplevel</span></code>.</p>
<p>Use grid with the returned widget. Its columns are configured like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>,-----------------------------------------------------------.
| Porcupine Settings                      |  _  |  O  |  X  |
|-----------------------------------------------------------|
|                           :                           :   |
|                           :                           :col|
|         column 0          :         column 1          :umn|
|                           :                           : 2 |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|                           :                           :   |
|===========================================================|
|  ,---------.                                 ,---------.  |
|  |  Reset  |                                 |   OK    |  |
|  `---------&#39;                                 `---------&#39;  |
`-----------------------------------------------------------&#39;
</pre></div>
</div>
<p>Column 0 typically contains labels such as “Font Family:”, and column 1
contains widgets for changing the settings. Column 2 is used for displaying
<img alt="triangle" src="_images/triangle.gif" /> when the user has chosen the setting badly.</p>
</dd></dl>

<p>You can add widgets to the content frame, but it’s usually easiest to use these functions.
All of these return the added widget.
A label that displays <em>text</em> is added to column 0 (see the ascii art above).
When setting the values, the converter passed to <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a> is used.</p>
<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.add_entry">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">add_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">entry_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tkinter.ttk.Entry</span></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L615-L632"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.add_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Entry</span></code> to the setting dialog.</p>
<p>A label that displays <em>text</em> will be added next to the entry.
All <code class="docutils literal notranslate"><span class="pre">**entry_kwargs</span></code> go to <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Entry</span></code>.</p>
<p>When the user types something into the entry, <em>validate_callback</em>
is called with the text of the entry as its only argument.
If it returns <code class="docutils literal notranslate"><span class="pre">True</span></code>, then the option given by <em>option_name</em>
is set to the string that the user typed.
Otherwise <img alt="triangle" src="_images/triangle.gif" /> is shown.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.add_checkbutton">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">add_checkbutton</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">checkbutton_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tkinter.ttk.Checkbutton</span></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L635-L674"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.add_checkbutton" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Checkbutton</span></code> to the setting dialog.</p>
<p>All <code class="docutils literal notranslate"><span class="pre">**checkbutton_kwargs</span></code> go to <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Checkbutton</span></code>.
You can do this, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">porcupine</span> <span class="kn">import</span> <span class="n">settings</span>

<span class="k">def</span> <span class="nf">do_something</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># &#39;bool&#39; here is a keyword and should not be replaced with &#39;True&#39; or &#39;False&#39;</span>
    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Foobar enabled&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Foobar disabled&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">setup</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">settings</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># False is default value</span>
    <span class="n">settings</span><span class="o">.</span><span class="n">add_checkbutton</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Enable foobar&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Currently it is not possible to display a <img alt="triangle" src="_images/triangle.gif" /> next to the
checkbutton. Let me know if you need it.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.add_combobox">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">add_combobox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">combobox_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Combobox" title="(in Python v3.10)"><span class="pre">tkinter.ttk.Combobox</span></a></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L677-L696"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.add_combobox" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <a class="reference external" href="https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Combobox" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Combobox</span></code></a> to the setting dialog.</p>
<p>All <code class="docutils literal notranslate"><span class="pre">**combobox_kwargs</span></code> go to <a class="reference external" href="https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Combobox" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Combobox</span></code></a>.
Usually you should pass at least <code class="docutils literal notranslate"><span class="pre">values=list_of_strings</span></code>.</p>
<p>The content of the combobox is checked whenever it changes.
If it’s in <code class="docutils literal notranslate"><span class="pre">combobox['values']</span></code>
(given with the <code class="docutils literal notranslate"><span class="pre">values=list_of_strings</span></code> keyword argument or changed
later by configuring the returned combobox), then the option given by
<em>option_name</em> is set to the content of the combobox. The converter passed
to <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a> will be used. If the content of the combobox is not
in <code class="docutils literal notranslate"><span class="pre">combobox['values']</span></code>, then <img alt="triangle" src="_images/triangle.gif" /> is shown.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.add_spinbox">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">add_spinbox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">spinbox_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Spinbox" title="(in Python v3.10)"><span class="pre">tkinter.ttk.Spinbox</span></a></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L699-L715"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.add_spinbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <a class="reference external" href="https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Spinbox" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Spinbox</span></code></a> to the setting dialog.</p>
<p>All <code class="docutils literal notranslate"><span class="pre">**spinbox_kwargs</span></code> go to <a class="reference external" href="https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Spinbox" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Spinbox</span></code></a>.
Usually you should pass at least <code class="docutils literal notranslate"><span class="pre">from_=some_integer,</span> <span class="pre">to=another_integer</span></code>.</p>
<p>The content of the spinbox is checked whenever it changes.
If it’s a valid integer between <code class="docutils literal notranslate"><span class="pre">spinbox['from']</span></code> and <code class="docutils literal notranslate"><span class="pre">spinbox['to']</span></code> (inclusive),
then the option given by <em>option_name</em> is set to the <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>.
Otherwise <img alt="triangle" src="_images/triangle.gif" /> is shown.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.add_label">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">add_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tkinter.ttk.Label</span></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L783-L795"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.add_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Add text to the setting dialog.</p>
<p>This is useful for explaining what some options do with more than a few words.
The text is always as wide as the dialog is, even when the dialog is resized.</p>
</dd></dl>

</section>
<section id="change-events">
<h2>Change Events<a class="headerlink" href="#change-events" title="Permalink to this headline">¶</a></h2>
<dl class="py virtualevent">
<dt class="sig sig-object py" id="porcupine.settings.SettingChanged-foo">
<span id="porcupine.settings.SettingChanged:foo"></span><em class="property"><span class="pre">virtual</span> <span class="pre">event</span> </em><span class="sig-name descname"><span class="pre">&lt;&lt;SettingChanged:foo&gt;&gt;</span></span><a class="headerlink" href="#porcupine.settings.SettingChanged-foo" title="Permalink to this definition">¶</a></dt>
<dd><p>When any setting is changed,
all widgets in the main window (see <a class="reference internal" href="porcupine.html#porcupine.get_main_window" title="porcupine.get_main_window"><code class="xref py py-func docutils literal notranslate"><span class="pre">porcupine.get_main_window()</span></code></a>)
receive a virtual event named <code class="docutils literal notranslate"><span class="pre">&lt;&lt;SettingChanged:option_name&gt;&gt;</span></code>,
where <code class="docutils literal notranslate"><span class="pre">option_name</span></code> is the name of the changed setting.
For example, <code class="docutils literal notranslate"><span class="pre">&lt;&lt;SettingChanged:pygments_style&gt;&gt;</span></code> runs
when the user changes the Pygments style.</p>
</dd></dl>

<p>All widget bindings go away automatically when the corresponding widget is destroyed.
For example, if you want to update the configuration of a <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.Text</span></code> widget when <code class="docutils literal notranslate"><span class="pre">pygments_style</span></code> changes,
you should use the <code class="docutils literal notranslate"><span class="pre">.bind()</span></code> method of that text widget.
This way your callback won’t be called when the text widget doesn’t exist anymore.</p>
<p>If you want your binding to work as long as Porcupine is running,
use the bind method of <a class="reference internal" href="porcupine.html#porcupine.get_tab_manager" title="porcupine.get_tab_manager"><code class="xref py py-func docutils literal notranslate"><span class="pre">porcupine.get_tab_manager()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not use <a class="reference internal" href="porcupine.html#porcupine.get_main_window" title="porcupine.get_main_window"><code class="xref py py-func docutils literal notranslate"><span class="pre">porcupine.get_main_window()</span></code></a> for binding to <code class="docutils literal notranslate"><span class="pre">&lt;&lt;SettingChanged:foo&gt;&gt;</span></code>.
The main window is a <a class="reference external" href="https://docs.python.org/3/library/tkinter.html#tkinter.Tk" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.Tk</span></code></a> widget,
so it gets notified of its child widgets’ events too.
(The same applies to <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.Toplevel</span></code>.)
For example, let’s say that  there are 100 widgets currently being shown in the main window,
and you unwisely use the main window’s <code class="docutils literal notranslate"><span class="pre">bind()</span></code> to bind <code class="docutils literal notranslate"><span class="pre">&lt;&lt;SettingChanged:foo&gt;&gt;</span></code>.
When the <code class="docutils literal notranslate"><span class="pre">foo</span></code> setting changes, your bind callback runs
100 times with <code class="docutils literal notranslate"><span class="pre">event.widget</span></code> set to something else than the main window, and
once with <code class="docutils literal notranslate"><span class="pre">event.widget</span></code> set to the main window.
This can cause annoying slowness.</p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.use_pygments_fg_and_bg">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">use_pygments_fg_and_bg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">widget</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tkinter.Misc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><span class="pre">object</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">option_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'pygments_style'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L826-L847"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.use_pygments_fg_and_bg" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a callback whenever the pygments theme changes.</p>
<p>The callback no longer runs once <code class="docutils literal notranslate"><span class="pre">widget</span></code> has been destroyed. It is
called with the foreground and background color of the pygments theme as
arguments.</p>
</dd></dl>

</section>
<section id="misc-functions">
<h2>Misc functions<a class="headerlink" href="#misc-functions" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.reset">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L356-L358"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an option to its default value given to <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.reset_all">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">reset_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L361-L368"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.reset_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all settings, including the ones not shown in the setting dialog.
Clicking the reset button of the setting dialog runs this function.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.show_dialog">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">show_dialog</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L497-L504"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.show_dialog" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the “Porcupine Settings” dialog.</p>
<p>This function is called when the user opens the dialog from the menu.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="porcupine.settings.save">
<span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L383-L398"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the settings to the config file.</p>
<p>Note that <code class="xref py py-func docutils literal notranslate"><span class="pre">porcupine.run()</span></code> always calls this before it returns,
so usually you don’t need to worry about calling this yourself.</p>
</dd></dl>

</section>
<section id="non-global-settings">
<h2>Non-global Settings<a class="headerlink" href="#non-global-settings" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="porcupine.settings.Settings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">porcupine.settings.</span></span><span class="sig-name descname"><span class="pre">Settings</span></span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L112-L346"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.Settings" title="Permalink to this definition">¶</a></dt>
<dd><p>This class provides settings that behave a lot like the global settings described above,
but each instance of <a class="reference internal" href="#porcupine.settings.Settings" title="porcupine.settings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a> has its own options
and isn’t related to other instances or global settings.
See <code class="xref py py-class docutils literal notranslate"><span class="pre">porcupine.tabs.Tab.settings</span></code> for an example.</p>
<p>The change events of <a class="reference internal" href="#porcupine.settings.Settings" title="porcupine.settings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a> instances differ from <a class="reference internal" href="#porcupine.settings.SettingChanged-foo" title="porcupine.settings.SettingChanged:foo"><code class="xref py py-virtevt docutils literal notranslate"><span class="pre">&lt;&lt;SettingChanged:foo&gt;&gt;</span></code></a>:</p>
<blockquote>
<div><ul class="simple">
<li><p>The change events are named differently.</p></li>
<li><p>Instead of having all child widgets of the main window receive the virtual events,
only one widget receives them.</p></li>
</ul>
</div></blockquote>
<p>The name of the event and the receiving widget should be mentioned
in the documentation of the <a class="reference internal" href="#porcupine.settings.Settings" title="porcupine.settings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a> instance,
such as the documentation of an attribute with type <a class="reference internal" href="#porcupine.settings.Settings" title="porcupine.settings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="porcupine.settings.Settings.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L206-L264"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.Settings.set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="porcupine.settings.Settings.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tybe</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L282-L318"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.Settings.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="porcupine.settings.Settings.add_option">
<span class="sig-name descname"><span class="pre">add_option</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L124-L204"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.Settings.add_option" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="porcupine.settings.Settings.debug_dump">
<span class="sig-name descname"><span class="pre">debug_dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Akuli/porcupine/blob/03a52e4c5c5e17728d109dfaac782d41df2a8b2f/porcupine/settings.py#L320-L333"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#porcupine.settings.Settings.debug_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>These methods are just like the
<a class="reference internal" href="#porcupine.settings.set_" title="porcupine.settings.set_"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_()</span></code></a>, <a class="reference internal" href="#porcupine.settings.get" title="porcupine.settings.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">get()</span></code></a>, <a class="reference internal" href="#porcupine.settings.add_option" title="porcupine.settings.add_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_option()</span></code></a> and <a class="reference internal" href="#porcupine.settings.debug_dump" title="porcupine.settings.debug_dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">debug_dump()</span></code></a> functions,
but they do things with the <a class="reference internal" href="#porcupine.settings.Settings" title="porcupine.settings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a> instance, not with the global settings.</p>
</dd></dl>

</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Porcupine API</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="plugin-intro.html">Introduction to Writing Plugins</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="porcupine.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine</span></code> — The top level Porcupine package</a></li>
<li class="toctree-l1"><a class="reference internal" href="menubar.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.menubar</span></code> — The menu bar at the top of the Porcupine window</a></li>
<li class="toctree-l1"><a class="reference internal" href="tabs.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.tabs</span></code> — The tab manager and tabs in it</a></li>
<li class="toctree-l1"><a class="reference internal" href="textutils.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.textutils</span></code> — Things for <code class="docutils literal notranslate"><span class="pre">tkinter.Text</span></code> widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="images.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.images</span></code> — Load images that come with Porcupine</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.settings</span></code> — Porcupine’s setting manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="pluginloader.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.pluginloader</span></code> — The module that loads plugins on startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.utils</span></code> — Handy utility functions and classes</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="images.html" title="previous chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.images</span></code> — Load images that come with Porcupine</a></li>
      <li>Next: <a href="pluginloader.html" title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">porcupine.pluginloader</span></code> — The module that loads plugins on startup</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy; 2017-2021 Akuli.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/settings.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>